(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){(function(){"use strict";const event=require("./lib/services.js");window.Pipeline=event;module.exports=event})()},{"./lib/services.js":8}],2:[function(require,module,exports){(function(){"use strict";var ua=window.navigator.userAgent;function userAgent(){return ua}function lang(){return ua.language||navigator.language||navigator.userLanguage}module.exports={userAgent:userAgent,lang:lang}})()},{}],3:[function(require,module,exports){(function(){"use strict";let ev={};var pipe={init:function(){ev.a="";ev.t="";ev.p={u:"",r:""};ev.e="";ev.c={u:"",l:""};ev.x={};return ev},get:function(){if(!Object.keys(ev).length)this.init();return ev},set:function(path,value){let level=0;path.reduce((a,b)=>{level++;if(level===path.length){a[b]=value;return value}else{return a[b]}},this.get())}};module.exports={pipe:pipe}})()},{}],4:[function(require,module,exports){(function(){"use strict";const ev=require("./init");const timeStamp=require("../timeStamps");const browser=require("../browser");const id=require("../id");var initev=function(){return ev.pipe.init()};var setTimestamp=function(){ev.pipe.set(["t"],JSON.stringify(timeStamp.generateTimestamp()))};var setevName=function(name){ev.pipe.set(["e"],name)};var getev=function(){return ev.pipe.get()};var setPageInfo=function(){ev.pipe.set(["p","u"],window.location.href);ev.pipe.set(["p","r"],document.referrer||"")};var setEventdata=function(){ev.pipe.set(["c","u"],browser.userAgent());ev.pipe.set(["c","l"],browser.lang());let a_id=getCookie("a_id");if(a_id)ev.pipe.set(["a"],a_id);else{a_id=id.getAnonymousId();ev.pipe.set(["a"],a_id);setCookie("a_id",a_id)}};var resetDimension=function(){ev.pipe.set(["x"],{})};var setExtra=function(obj,id){let val=parseInt(id);if(!val)throw"Key should be string of the form d{id}";if(val>0&&val<=100){if(val<10&&val>0){let _id=id;id=`d0${val}`;ev.pipe.set(["x",`${id}`],obj[_id])}else{ev.pipe.set(["x",`${id}`],obj[id])}}else{throw"Key should be lesser than 100"}};var setCookie=function(name,value){var expires="";var date=new Date;date.setTime(date.getTime()+365*100*24*60*60*1e3);expires="; expires="+date.toUTCString();document.cookie=name+"="+(value||"")+expires+"; path=/"};var getCookie=function(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)}return null};module.exports={initev:initev,setTimestamp:setTimestamp,setPageInfo:setPageInfo,resetDimension:resetDimension,setevName:setevName,setEventdata:setEventdata,setExtra:setExtra,getev:getev}})()},{"../browser":2,"../id":6,"../timeStamps":9,"./init":3}],5:[function(require,module,exports){(function(){"use strict";const networkService=require("./networkService");const setup=require("./core/operations");var initConfig=function(url){setup.initev();networkService.setUrl(url)};var publishData=function(){setup.setTimestamp();let event=setup.getev();return networkService.publish(event)};var setPageInfo=function(){setup.setPageInfo()};var setDimension=function(obj){setup.resetDimension();if(obj){let keys=Object.keys(obj);keys.forEach(id=>{if(typeof obj[id]=="string"||typeof obj[id]=="number"||typeof obj[id]=="boolean"){setup.setExtra(obj,id)}else{throw`Id ${id}: Dimension values can only be strings while you are sending ${typeof obj[id]}`}})}};var setEventname=function(name){setup.setevName(name)};var setEventData=function(){setup.setEventdata()};module.exports={publishData:publishData,setPageInfo:setPageInfo,setDimension:setDimension,setEventname:setEventname,initConfig:initConfig,setEventData:setEventData}})()},{"./core/operations":4,"./networkService":7}],6:[function(require,module,exports){(function(){"use strict";const shortid=require("shortid");var setAid=function(){let id=shortid.generate();return id};var getAnonymousId=function(){return setAid()};module.exports={getAnonymousId:getAnonymousId}})()},{shortid:11}],7:[function(require,module,exports){(function(){"use strict";let BASE_URL="";let getbrowser=function(){var ua=navigator.userAgent,tem,M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(M[1])){tem=/\brv[ :]+(\d+)/g.exec(ua)||[];return{name:"IE",version:tem[1]||""}}if(M[1]==="Chrome"){tem=ua.match(/\b(OPR|Edge)\/(\d+)/);if(tem!=null)return{name:tem[1].replace("OPR","Opera"),version:tem[2]}}M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"];if((tem=ua.match(/version\/(\d+)/i))!=null)M.splice(1,1,tem[1]);return{name:M[0],version:M[1]}};let setUrl=function(url){BASE_URL=url};function useRequest(data,domain){var status=false,isXHR="onload"in new XMLHttpRequest?true:false;if(isXHR){try{var xhr=new XMLHttpRequest;xhr.open("POST",domain,true);xhr.setRequestHeader("Content-Type","text/plain");xhr.send(JSON.stringify(data));xhr.onreadystatechange=function(){if(this.readyState!=4)return;if(this.status!=200){return status}else{status=true}}}catch(e){}}else{try{var xdr=new XDomainRequest;xdr.open("POST",domain);setTimeout(function(){xdr.send(data)},0);xdr.onerror=function(){return status};xdr.onload=function(){status=true}}catch(e){}}return status}let fallbackRequest=function(data){let config={};config["method"]="POST";config.headers={};config.headers["Content-Type"]="text/plain";config["keepalive"]=true;config["body"]=JSON.stringify(data);try{return fetch(`${BASE_URL}/publish`,config).then(({ok:ok})=>ok)}catch(e){return useRequest(data,`${BASE_URL}/publish`)}};function checkBrowser(){if(getbrowser().name=="Chrome"&&getbrowser().version[0]+getbrowser().version[1]=="59"||getbrowser().name=="Safari"&&getbrowser().version[0]+getbrowser().version[1]=="12"){return true}else{return false}}let sendBeacon=function(data){try{let body=data;let headers={type:"text/plain"};let blob=new Blob([JSON.stringify(body)],headers);if(blob==null||undefined||"")return fallbackRequest(data);if(checkBrowser(data)){fallbackRequest(data);return true}let req=window.navigator.sendBeacon(`${BASE_URL}/publish`,blob);return new Promise(function(resolve){resolve(req)})}catch(e){console.log(e)}};let publish=function(data){if(navigator.sendBeacon){var res=sendBeacon(data);if(!res){return fallbackRequest(data)}return res}else{return fallbackRequest(data)}};module.exports={publish:publish,setUrl:setUrl}})()},{}],8:[function(require,module,exports){(function(){"use strict";const helper=require("./helper");function Pipeline(){}Pipeline.prototype.init=function(api_key,url){if(!api_key)throw"Initialise API key first";helper.initConfig(url)};Pipeline.prototype.push=function(name,extra){if(!name)throw"Can't Inititialize without name";helper.setEventname(name);helper.setDimension(extra);helper.setPageInfo();helper.setEventData();return helper.publishData()};module.exports=Pipeline})()},{"./helper":5}],9:[function(require,module,exports){(function(){"use strict";function generateTimestamp(){return Math.round((new Date).getTime()/1e3)}module.exports={generateTimestamp:generateTimestamp}})()},{}],10:[function(require,module,exports){module.exports=function(random,alphabet,size){var mask=(2<<Math.log(alphabet.length-1)/Math.LN2)-1;var step=Math.ceil(1.6*mask*size/alphabet.length);size=+size;var id="";while(true){var bytes=random(step);for(var i=0;i<step;i++){var byte=bytes[i]&mask;if(alphabet[byte]){id+=alphabet[byte];if(id.length===size)return id}}}}},{}],11:[function(require,module,exports){"use strict";module.exports=require("./lib/index")},{"./lib/index":15}],12:[function(require,module,exports){"use strict";var randomFromSeed=require("./random/random-from-seed");var ORIGINAL="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";var alphabet;var previousSeed;var shuffled;function reset(){shuffled=false}function setCharacters(_alphabet_){if(!_alphabet_){if(alphabet!==ORIGINAL){alphabet=ORIGINAL;reset()}return}if(_alphabet_===alphabet){return}if(_alphabet_.length!==ORIGINAL.length){throw new Error("Custom alphabet for shortid must be "+ORIGINAL.length+" unique characters. You submitted "+_alphabet_.length+" characters: "+_alphabet_)}var unique=_alphabet_.split("").filter(function(item,ind,arr){return ind!==arr.lastIndexOf(item)});if(unique.length){throw new Error("Custom alphabet for shortid must be "+ORIGINAL.length+" unique characters. These characters were not unique: "+unique.join(", "))}alphabet=_alphabet_;reset()}function characters(_alphabet_){setCharacters(_alphabet_);return alphabet}function setSeed(seed){randomFromSeed.seed(seed);if(previousSeed!==seed){reset();previousSeed=seed}}function shuffle(){if(!alphabet){setCharacters(ORIGINAL)}var sourceArray=alphabet.split("");var targetArray=[];var r=randomFromSeed.nextValue();var characterIndex;while(sourceArray.length>0){r=randomFromSeed.nextValue();characterIndex=Math.floor(r*sourceArray.length);targetArray.push(sourceArray.splice(characterIndex,1)[0])}return targetArray.join("")}function getShuffled(){if(shuffled){return shuffled}shuffled=shuffle();return shuffled}function lookup(index){var alphabetShuffled=getShuffled();return alphabetShuffled[index]}function get(){return alphabet||ORIGINAL}module.exports={get:get,characters:characters,seed:setSeed,lookup:lookup,shuffled:getShuffled}},{"./random/random-from-seed":18}],13:[function(require,module,exports){"use strict";var generate=require("./generate");var alphabet=require("./alphabet");var REDUCE_TIME=1459707606518;var version=6;var counter;var previousSeconds;function build(clusterWorkerId){var str="";var seconds=Math.floor((Date.now()-REDUCE_TIME)*.001);if(seconds===previousSeconds){counter++}else{counter=0;previousSeconds=seconds}str=str+generate(version);str=str+generate(clusterWorkerId);if(counter>0){str=str+generate(counter)}str=str+generate(seconds);return str}module.exports=build},{"./alphabet":12,"./generate":14}],14:[function(require,module,exports){"use strict";var alphabet=require("./alphabet");var random=require("./random/random-byte");var format=require("nanoid/format");function generate(number){var loopCounter=0;var done;var str="";while(!done){str=str+format(random,alphabet.get(),1);done=number<Math.pow(16,loopCounter+1);loopCounter++}return str}module.exports=generate},{"./alphabet":12,"./random/random-byte":17,"nanoid/format":10}],15:[function(require,module,exports){"use strict";var alphabet=require("./alphabet");var build=require("./build");var isValid=require("./is-valid");var clusterWorkerId=require("./util/cluster-worker-id")||0;function seed(seedValue){alphabet.seed(seedValue);return module.exports}function worker(workerId){clusterWorkerId=workerId;return module.exports}function characters(newCharacters){if(newCharacters!==undefined){alphabet.characters(newCharacters)}return alphabet.shuffled()}function generate(){return build(clusterWorkerId)}module.exports=generate;module.exports.generate=generate;module.exports.seed=seed;module.exports.worker=worker;module.exports.characters=characters;module.exports.isValid=isValid},{"./alphabet":12,"./build":13,"./is-valid":16,"./util/cluster-worker-id":19}],16:[function(require,module,exports){"use strict";var alphabet=require("./alphabet");function isShortId(id){if(!id||typeof id!=="string"||id.length<6){return false}var nonAlphabetic=new RegExp("[^"+alphabet.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!nonAlphabetic.test(id)}module.exports=isShortId},{"./alphabet":12}],17:[function(require,module,exports){"use strict";var crypto=typeof window==="object"&&(window.crypto||window.msCrypto);var randomByte;if(!crypto||!crypto.getRandomValues){randomByte=function(size){var bytes=[];for(var i=0;i<size;i++){bytes.push(Math.floor(Math.random()*256))}return bytes}}else{randomByte=function(size){return crypto.getRandomValues(new Uint8Array(size))}}module.exports=randomByte},{}],18:[function(require,module,exports){"use strict";var seed=1;function getNextValue(){seed=(seed*9301+49297)%233280;return seed/233280}function setSeed(_seed_){seed=_seed_}module.exports={nextValue:getNextValue,seed:setSeed}},{}],19:[function(require,module,exports){"use strict";module.exports=0},{}]},{},[1]);